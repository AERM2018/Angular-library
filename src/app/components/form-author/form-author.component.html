<main>
    <div class="container mt-5">
      <form [formGroup]="form">
        <legend>Author form</legend>
        <div class="row">
            <div class="mb-3 col-6">
              <label class="form-label">First name</label>
              <input 
                  class="form-control " 
                  placeholder="Type the first name"
                  [(ngModel)]="author.firstName" 
                  formControlName='firstName'
                  [ngClass]="(form.controls.firstName.errors && form.controls.firstName.touched)  ? 'is-invalid' :'' "
              />
              <p class="text-danger" *ngIf="(form.controls.firstName.errors && form.controls.firstName.touched)">*required</p>
      
            </div>
              <div class="mb-3 col-6">
                <label class="form-label">Second name</label>
                <input 
                class="form-control" 
                placeholder="Type the second name"
                [(ngModel)]="author.secondName" 
                [ngClass]="(form.controls.secondName.errors && form.controls.secondName.touched)  ? 'is-invalid' :'' "
                formControlName='secondName'
                />
                <p class="text-danger" *ngIf="(form.controls.secondName.errors && form.controls.secondName.touched)">*required</p>
                </div>
        </div>
        <div class="row">
                <div class="mb-3 col-6">
                    <label class="form-label">Surname</label>
                    <input 
                    class="form-control" 
                    placeholder="Type the surname"
                    [(ngModel)]="author.surname" 
                    [ngClass]="(form.controls.surname.errors && form.controls.surname.touched)  ? 'is-invalid' :'' "
                    formControlName='surname'
                    />
                    <p class="text-danger" *ngIf="(form.controls.surname.errors && form.controls.surname.touched)">*required</p>
                </div>
                <div class="mb-3 col-6">
                    <label class="form-label">Birthdate</label>
                    <input 
                    class="form-control" 
                    placeholder="Type the birthdate (yyyy/mm/dd)"
                    [(ngModel)]="author.birthdate" 
                    [ngClass]="(form.controls.birthDate.errors && form.controls.birthDate.touched)  ? 'is-invalid' :'' "
                    formControlName='birthDate'
                    />
                    <p class="text-danger" *ngIf="(form.controls.birthDate.errors && form.controls.birthDate.touched)">*required</p>
                </div>
        </div>
        <div class="row">
            <div class="col mb-6">
                <label class="form-label">Bio</label>
                    <textarea 
                    class="form-control" 
                    placeholder="Type the biography"
                    [(ngModel)]="author.bio" 
                    [ngClass]="(form.controls.bio.errors && form.controls.bio.touched)  ? 'is-invalid' :'' "
                    formControlName='bio'
                    ></textarea>
                    <p class="text-danger" *ngIf="(form.controls.bio.errors && form.controls.bio.touched)">*required</p>
            </div>
        </div>
        <div class="row">
            <div class="mt-3">
                <label for="formFile" class="form-label">Avatar</label>
                <input
                #fileInput
                class="form-control" type="file" id="formFile"
                formControlName="profilePic"
                [(ngModel)]="author.profilePic" 
                (change)="uploadFile()"
                >
              </div>
        </div>
        <div class="row d-grid grap-2 mt-5" *ngIf="author.id==0 else updateAuthor">
            <button class="btn btn-primary" (click)="submit() "[disabled]="!form.valid">Save</button>
        </div>

        <ng-template #updateAuthor>
          <div class="row d-grid grap-2 mt-5">
            <button class="btn btn-primary" (click)="update()"[disabled]="!form.valid">Update</button>
        </div>
        </ng-template>
        
      </form>
    </div>
  </main>
